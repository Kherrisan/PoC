#!/bin/bash

IMAGE=unzip-1ba59e08e410ce4bd897dd4ef3d0f59ca26b34f76de51d3b4382d72b8ae0d40d
docker build -t $IMAGE .

echo "[+] Running unzip /testcase"
docker run --rm -v $PWD/1ba59e08e410ce4bd897dd4ef3d0f59ca26b34f76de51d3b4382d72b8ae0d40d_SIGSEGV:/testcase:ro \
    -it $IMAGE valgrind unzip /testcase

echo "[+] Dropping into shell. Malformed input is located at /testcase"
docker run --rm -v $PWD/1ba59e08e410ce4bd897dd4ef3d0f59ca26b34f76de51d3b4382d72b8ae0d40d_SIGSEGV:/testcase:ro \
    -it $IMAGE bash
